---
class: post-blog post-detail
type: Blog
$title: "Measuring user journeys across the AMP Cache and your website"
id: measuring-user-journeys-across-the-amp-cache-and-your-website
author: Jeff Jose
role:  Product Manager, AMP Project at Google
origin: "https://amphtml.wordpress.com/2018/09/17/measuring-user-journeys-across-the-amp-cache-and-your-website/amp/"
excerpt: "“If you can’t measure it, you can’t manage it.” &#8212; Peter Drucker As users demand better privacy controls, browser vendors have started responding with defaults that partition cookies. This means traditional approaches of relying on third-party cookies for measurement won’t work going forward. AMP pages are often served from an AMP Cache and the ability [&#8230;]"
avatar: https://1.gravatar.com/avatar/42ecb1ea497ca9d0ffe1e406cae70e27?s=96&d=identicon&r=G
date_data: 2018-09-17T16:34:00-07:00
$date: September 17, 2018
$parent: /content/latest/list-blog.html
$path: /latest/blog/{base}/
$localization:
  path: /{locale}/latest/blog/{base}/
components:
  - social-share
inlineCSS: .amp-wp-inline-329fdb7771c10d07df9eb73273c95a60{font-weight:400;}.amp-wp-inline-ac5342efcffd6f39934b4d429cafd142{color:#ff0000;font-weight:400;}.amp-wp-inline-5d9f498fdd0b0f222dce4d6216ec4eec{color:#339966;font-weight:400;}.amp-wp-inline-57a9c8d1e4ed0c2f012f8df65ab67614{color:#ff9900;}.amp-wp-inline-61cd676b7bd65a074cc1d867fbbea1de{text-decoration:underline;}.amp-wp-inline-06289ed2dc636e72ca6e41e25b20615a{color:#ff0000;text-decoration:underline;}
---

<div class="amp-wp-article-content">

		<p><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">“If you can’t measure it, you can’t manage it.” — Peter Drucker</span></p><p><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">As users demand better privacy controls, browser vendors have started responding with defaults that partition cookies. This means traditional approaches of relying on third-party cookies for measurement won’t work going forward.</span></p><p><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">AMP pages are often served from an </span><a href="https://developers.google.com/amp/cache/overview"><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">AMP Cache</span></a><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60"> and the ability to maintain a session by using a third-party cookie allows publishers to remember user settings and preferences even when users move between the AMP cache domain and the publisher’s domain. </span></p><h3><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">AMP Linker</span></h3><p><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">AMP Linker is a new feature in AMP that helps keep user session in sync. It works by decorating outgoing links from AMP cache with params such as AMP Client ID in a URL parameter. On the receiving side, your analytics provider consumes the parameter and writes it down as a first-party cookie.</span></p><p><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">The decorated link will look something like</span></p><p><span class="amp-wp-inline-61cd676b7bd65a074cc1d867fbbea1de"><a href="https://destination.com/checkout" rel="nofollow">https://destination.com/checkout</a>?<span class="amp-wp-inline-06289ed2dc636e72ca6e41e25b20615a">_foo=1*19eaxqc*bar*V2dj…eHZKYg</span></span></p><h3><a href="https://amphtml.files.wordpress.com/2018/09/linker.png"><amp-img class=" size-full wp-image-2139 aligncenter amp-wp-enforced-sizes" src="https://amphtml.files.wordpress.com/2018/09/linker.png?w=660" alt="linker.png" srcset="https://amphtml.files.wordpress.com/2018/09/linker.png?w=660 660w, https://amphtml.files.wordpress.com/2018/09/linker.png?w=1320 1320w, https://amphtml.files.wordpress.com/2018/09/linker.png?w=150 150w, https://amphtml.files.wordpress.com/2018/09/linker.png?w=300 300w, https://amphtml.files.wordpress.com/2018/09/linker.png?w=768 768w, https://amphtml.files.wordpress.com/2018/09/linker.png?w=1024 1024w" sizes="(min-width: 660px) 660px, 100vw" width="660" height="283"></amp-img></a></h3><h3><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60"><br/>
Enable AMP Linker</span></h3><p><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">AMP Linker works by including a config for your analytics provider. For instance, if you’re using </span><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">Google Analytics</span><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60"> you’d include something as follows:</span></p><pre><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">&lt;</span><span class="amp-wp-inline-ac5342efcffd6f39934b4d429cafd142">amp-analytics</span> <span class="amp-wp-inline-57a9c8d1e4ed0c2f012f8df65ab67614"><i><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">type</span></i></span><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">=</span><span class="amp-wp-inline-5d9f498fdd0b0f222dce4d6216ec4eec">”googleanalytics”</span><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">&gt;</span>
<span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60"> &lt;</span><span class="amp-wp-inline-ac5342efcffd6f39934b4d429cafd142">script</span> <span class="amp-wp-inline-57a9c8d1e4ed0c2f012f8df65ab67614"><i><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">type</span></i></span><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">=</span><span class="amp-wp-inline-5d9f498fdd0b0f222dce4d6216ec4eec">”application/json”</span><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">&gt;</span>
<span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">   {</span>
<span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">     “linkers”: {</span>
<span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">       </span><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">”enabled”: true</span>
<span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">     }</span>
<span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">   }</span>
<span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">&lt;/</span><span class="amp-wp-inline-ac5342efcffd6f39934b4d429cafd142">script</span><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">&gt;</span>
<span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">&lt;/</span><span class="amp-wp-inline-ac5342efcffd6f39934b4d429cafd142">amp-analytics</span><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">&gt;</span></pre><p><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">If you already use the </span><a href="https://support.google.com/analytics/answer/7486764"><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">Google AMP Client ID API</span></a><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60"> with Google Analytics, no additional tagging is required to take advantage of AMP Linker capability. </span></p><p><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">If you are an analytics provider, we welcome you to reach out to us to take advantage of AMP Linker.</span></p><h3><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">Looking ahead</span></h3><p><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">We’re hard at work to support non-traditional, yet important, user journeys where a user goes from non-AMP pages to AMP pages. Keep an eye out on our repo on </span><a href="https://github.com/ampproject/amphtml/"><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">Github</span></a><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60"> for updates regarding those.</span></p><p><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">Happy measuring!</span></p><p><i><span class="amp-wp-inline-329fdb7771c10d07df9eb73273c95a60">Posted by Jeff Jose, Product Manager, AMP Project at Google</span></i></p>	</div>

	

</div>

