---
$title: Components
$titles:
  teaser: Components.
$view: /views/custom.j2
$path: /documentation/components/index.html
$localization:
  path: /{locale}/documentation/components/index.html
$hidden: true

flyout:
  description: The complete AMP library
  icon: components-flyout

teaser:
  image:
    src: 'https://placehold.it/400x400'
    width: 1
    height: 1
    alt: lorem ipsum
  text: Each component reference page provides detailed information on how to integrate.

highlighted_components:
  - /content/amp-dev/documentation/components/reference/amp-analytics-v0.1.md
  - /content/amp-dev/documentation/components/reference/amp-autocomplete-v0.1.md
  - /content/amp-dev/documentation/components/reference/amp-carousel-v0.2.md
  - /content/amp-dev/documentation/components/reference/amp-ad-v0.1.md
  - /content/amp-dev/documentation/components/reference/amp-list-v0.1.md
  - /content/amp-dev/documentation/components/reference/amp-story-v1.0.md

recent_components:

---
{% do doc.styles.addCssFile('/css/components/templates/component-overview.css') %}

{% block main %}
{% include 'views/partials/sidebar-toggle-observer.j2' %}
<main class="ap--main ap-t-component-overview">
  <div class="ap--container">
    {% include 'views/partials/sidebar-toggle.j2' %}
    <span id="ap--sidebar-content" class="ap--sidebar"></span>
    <section class="ap--content">
          <amp-state id="activeFilter">
            <script type="application/json">
              {
              "chosenFilter": "none"
              }
            </script>
          </amp-state>

      {% include '/views/partials/breadcrumbs.j2' %}

      <h1>The AMP Component Catalogue</h1>
      <p>The AMP HTML library consists of a basic runtime that brings the core functionalities of AMP to your page. If you want to add additional features you can do so by using one or more of the ready-to-use AMP components. They are classified as:</p>
      <hr>

      <section id="filter" class="ap-m-table-component-container">
        {% set categories = g.categories('/content/amp-dev/documentation/components/reference', locale=doc.locale) %}
        {% do doc.styles.addCssFile('/css/components/molecules/table-component.css') %}

        {% set filter_categories = categories|map(attribute=0)|list|tojson %}

        <h2>Filter by category</h2>
        {% include 'views/partials/category-filter.j2'%}

        {% for category, docs in categories %}
        {% set scope = namespace(categoryFormats = []) %}

        {% for doc in docs %}
          {% set formats = doc.formats or ['websites'] %}
          {% set scope.categoryFormats = scope.categoryFormats + formats %}
        {% endfor %}

        [% if not {{ filter_categories }}.includes(category) or {{ filter_categories }}.includes(category) and category == '{{ category|slug }}' %]
        {% set category_name = category.split('.')[1] if category and category.split('.')|length == 2 else category %}
        <div id="{{ category }}" class="ap-m-table-component">
            {% if category %}
            <h4 id="{{ category }}">{{ _(category_name) }}</h4>
            {% endif %}
            {% for component in docs if component.is_current %}
            {# The latest document might not support a format, hence we have to check if any version supports a format #}
            {% set formats = [component.formats] %}
            {% if component.versions|count > 1 %}
            {% for version in component.versions %}
            {% set versionDoc = g.doc('/content/amp-dev/documentation/components/reference/' + component.title + '-v' + version + '.md') %}
            {% do formats.append(versionDoc.formats) %}
            {% endfor %}
            {% endif %}
            {% set formats = formats|sum(start=[])|unique|list %}

            <a class="ap-m-table-component-link" href="{{ component.url.path }}" [hidden]="component.category != activeFilter.chosenFilter && activeFilter.chosenFilter != 'none'">
              <div class="ap-m-table-component-row-components">
                {% if formats %}
                {% do doc.styles.addCssFile('/css/components/molecules/tag.css') %}
                <div class="ap-m-table-component-tags">
                  {% if 'websites' in formats %}
                  <div class="ap-m-tag ap-m-tag-websites ap-m-table-component-tag"></div>
                  {% endif %}
                  {% if 'stories' in formats %}
                  <div class="ap-m-tag ap-m-tag-stories ap-m-table-component-tag"></div>
                  {% endif %}
                  {% if 'ads' in formats %}
                  <div class="ap-m-tag ap-m-tag-ads ap-m-table-component-tag"></div>
                  {% endif %}
                  {% if 'email' in formats or 'emails' in formats %}
                  <div class="ap-m-tag ap-m-tag-email ap-m-table-component-tag"></div>
                  {% endif %}
                </div>
                {% else %}
                <p></p>
                {% endif %}
                <div class="ap-m-table-component-name">
                  <span class="ap-m-table-component-name-title">{{ component.title }}</span>
                </div>
                <div class="ap-m-table-component-info">
                  <div class="ap-m-table-component-copy">{{ component.teaser.text|truncate(70, false, '...') }}</div>
                </div>
              </div>
            </a>
            {% endfor %}
          </div>
        [% endif %]
        {% endfor %}
      </section>
  </div>
</main>
{% with type = 'component' %}
{% endwith %}
{% endblock %}
